<!doctype html>
<html>
  <head>
    <title>Websocket example</title>
  </head>
  <body>
    <input type="text" id="message">
    <button>Send</button>
    <ul></ul>
    <script type="text/javascript">
      var ws = new WebSocket('ws://' + document.domain + ':' + location.port + '/ws');
      ws.onmessage = function (event) {
        console.log(event)
        var messages_dom = document.getElementsByTagName('ul')[0];
        var message_dom = document.createElement('li');
        var data = JSON.parse(event.data);
        console.log(data)
        var content_dom = document.createTextNode('Received: ' + event.data);
        message_dom.prepend(content_dom);
        messages_dom.prepend(message_dom);
      };

      var button = document.getElementsByTagName('button')[0];
      button.onclick = function() {
        var content = document.getElementsByTagName('input')[0].value;
        ws.send(content);
      };

      function get_age_sex(){
        var age_sex = ws.send(content);
        console.log(age_sex, 111);
      }
    </script>
  </body>
</html>
